---
import Layout from '../layouts/Layout.astro'
import { homePagePostsQuery, type Post } from '../api/posts'
import IndexPosts from '../components/indexPosts.astro'
import { getLangFromUrl } from '../i18n/utils'

const currentLang = getLangFromUrl(Astro.url)

const data = await homePagePostsQuery(currentLang)
const posts = data

const seo = {
  title: 'Accueil'
}

Astro.response.headers.set('Cache-Control', 'max-age=600, must-revalidate')
---

<Layout title={seo.title}>
  <main>
    <IndexPosts posts={posts} />
  </main>
</Layout>
