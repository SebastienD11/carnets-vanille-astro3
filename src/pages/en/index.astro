---
import Layout from '../../layouts/Layout.astro'
import Card from '../../components/post/card.astro'
import { homePagePostsQuery, type Post } from '../../api/posts'

const data = await homePagePostsQuery()
const posts = data

Astro.response.headers.set('Cache-Control', 'max-age=600, must-revalidate')
---

<Layout title="Home Page">
  <main>
    <h2>Recent Posts</h2>
    {posts.length > 1 && posts.map((post: Post) => <Card post={post} />)}
    {posts.length === 0 && <p>No posts found.</p>}
  </main>
</Layout>
