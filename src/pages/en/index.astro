---
import Layout from '../../layouts/Layout.astro'
import IndexPosts from '../../components/indexPosts.astro'
import { getPosts } from '../../api/post'
import { getLangFromUrl } from '../../i18n/utils'

const lang = getLangFromUrl(Astro.url)
const posts = await getPosts(`lang=${lang}`)

const seo = {
  title: 'Home'
}

Astro.response.headers.set('Cache-Control', 'max-age=600, must-revalidate')
---

<Layout seo={seo}>
  <main>
    <IndexPosts posts={posts} />
  </main>
</Layout>
