---
import { getMediaById } from '../../api/media'
import { getLangFromUrl, useTranslatedPath } from '../../i18n/utils'
import { Image } from 'astro:assets'

const lang = getLangFromUrl(Astro.url)
const translatePath = useTranslatedPath(lang)
const { post } = Astro.props
const featuredImage = await getMediaById(post.featured_media, lang)
---

<a
  class="group flex flex-col gap-4 hover:underline"
  href={translatePath(`/${post.slug}`)}
  aria-label={post.title}
>
  {
    featuredImage && (
      <Image
        src={featuredImage.source_url}
        alt={featuredImage.alt_text}
        width={featuredImage.media_details.width}
        height={featuredImage.media_details.height}
        class="h-auto w-full rounded transition-shadow duration-300 group-hover:shadow-lg"
      />
    )
  }
  <h3 class="text-base font-bold">{post.title.rendered}</h3>
</a>
