---
import { useTranslations } from '../../i18n/ui'
import InputText from '../ui/form/text.astro'
import InputEmail from '../ui/form/email.astro'
import InputSubmit from '../ui/form/submit.astro'
import FormErrors from '../ui/form/error.astro'
import Textarea from '../ui/form/textarea.astro'
import { ADMIN_EMAIL } from '../../constant'

const lang = Astro.currentLocale as string
const t = useTranslations(lang)
---

<form
  id="comment-form"
  class="flex flex-col gap-8"
  onsubmit="formSubmit(event, postComment)"
  novalidate
>
  <FormErrors
    requiredFieldsError={t('post.comments.form.errors.fields')}
    callbackError={t('post.comments.form.errors.callback') + ADMIN_EMAIL}
  />
  <div class="grid grid-cols-2 gap-8">
    <InputText required id="firstName" name="firstName" label={t('post.comments.form.firstName')} />
    <InputEmail required id="email" name="email" label={t('post.comments.form.email')} />
  </div>
  <div>
    <InputText id="website" name="website" label={t('post.comments.form.website')} />
  </div>
  <Textarea
    required
    id="comment"
    name="comment"
    label={t('post.comments.form.comment')}
    placeholder={t('post.comments.form.comment')}
  />
  <InputSubmit label={t('post.comments.form.submit')} />
</form>

<script is:inline>
  async function postComment(form) {
    return Promise.reject()
  }
</script>
