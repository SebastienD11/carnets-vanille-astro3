---
import { getLangFromUrl, useTranslatedPath } from '../i18n/utils'

const lang = getLangFromUrl(Astro.url)
const translatePath = useTranslatedPath(lang)
const { total, perPage, currentPage, baseUrl } = Astro.props
const totalPages = Math.ceil(total / perPage)
---

<ul class="mt-16 flex flex-row justify-center gap-4">
  {
    [...Array(totalPages).keys()].map((page) => {
      const pageNumber = page + 1
      return (
        <li>
          {pageNumber === currentPage ? (
            <span class="bold flex h-8 w-8 items-center justify-center rounded-sm border border-black bg-black p-2 text-white dark:border-white dark:bg-white dark:text-black">
              {pageNumber}
            </span>
          ) : (
            <a
              class="flex h-8 w-8 items-center justify-center rounded-sm border border-black p-2 transition-all duration-200 hover:-translate-y-1 dark:border-white"
              href={
                pageNumber === 1
                  ? translatePath(`${baseUrl}`)
                  : translatePath(`${baseUrl}/page/${pageNumber}`)
              }
            >
              {pageNumber}
            </a>
          )}
        </li>
      )
    })
  }
</ul>
